datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Question {
  id               Int     @id @default(autoincrement())
  subject          String
  topic            String
  subtopic         String
  chapterId        String
  difficulty       String?
  passage          String? // üëà NAYI LINE: English passage ke liye
  passageHindi     String?
  question         String
  questionHindi    String?
  options          String  // SQLite arrays support nahi karta, isliye isko String rakha hai
  answer           String
  explanation      String?
  explanationHindi String?
  examReference    String?
  geometryType     String?
  geometryData     String?
}

// ... aapka purana Question model yahan upar rahega ...

// Aapka updated User model
model User {
  id        Int      @id @default(autoincrement())
  name      String
  email     String   @unique
  password  String
  isPremium Boolean  @default(false)
  premiumExpiry DateTime?
  createdAt DateTime @default(now())
  results   Result[] // üëà Nayi line: Ek user ke bohot saare results ho sakte hain
  tickets   SupportTicket[]
}

// üèÜ NAYA MODEL: Results save karne ke liye
model Result {
  id        Int      @id @default(autoincrement())
  userId    Int
  user      User     @relation(fields: [userId], references: [id])
  subject   String   // Jaise: Maths
  topic     String   // Jaise: Number System
  score     Int      // Kitne marks aaye
  total     Int      // Total kitne marks ka tha
  createdAt DateTime @default(now())
}

model SupportTicket {
  id         Int      @id @default(autoincrement())
  userId     Int
  user       User     @relation(fields: [userId], references: [id])
  subject    String
  message    String
  adminReply String?  // Admin ka reply
  status     String   @default("OPEN") // "OPEN" ya "RESOLVED"
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
}